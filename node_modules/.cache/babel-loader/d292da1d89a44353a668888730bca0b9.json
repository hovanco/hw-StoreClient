{"ast":null,"code":"import { routerMiddleware } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { persistReducer, persistStore } from 'redux-persist';\nimport { createWhitelistFilter } from 'redux-persist-transform-filter';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport storage from 'redux-persist/lib/storage';\nimport thunk from 'redux-thunk';\nimport { onApiUnauthenticated } from '../middleware/auth';\nimport rootReducer from './rootReducer';\nexport const history = createBrowserHistory();\nconst enhancers = [];\nconst middleware = [routerMiddleware(history), thunk, onApiUnauthenticated];\nconst persistConfig = {\n  key: 'root',\n  storage,\n  whitelist: ['auth'],\n  stateReconciler: autoMergeLevel2,\n  transforms: [createWhitelistFilter('auth', ['isAuth', 'token', 'user'])]\n};\n\nif (process.env.NODE_ENV === 'development') {\n  const devToolsExtension = window && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n  if (typeof devToolsExtension === 'function') {\n    enhancers.push(devToolsExtension());\n  }\n}\n\nconst composedEnhancers = compose(applyMiddleware(...middleware), ...enhancers);\nconst persistedReducer = persistReducer(persistConfig, rootReducer(history));\nconst store = createStore(persistedReducer, composedEnhancers);\nexport const persistor = persistStore(store);\nexport default store;","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/StoreClient/src/store/index.ts"],"names":["routerMiddleware","createBrowserHistory","applyMiddleware","compose","createStore","persistReducer","persistStore","createWhitelistFilter","autoMergeLevel2","storage","thunk","onApiUnauthenticated","rootReducer","history","enhancers","middleware","persistConfig","key","whitelist","stateReconciler","transforms","process","env","NODE_ENV","devToolsExtension","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","push","composedEnhancers","persistedReducer","store","persistor"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,wBAAjC;AACA,SAASC,oBAAT,QAAqC,SAArC;AACA,SAASC,eAAT,EAA0BC,OAA1B,EAAmCC,WAAnC,QAAsD,OAAtD;AACA,SAASC,cAAT,EAAyBC,YAAzB,QAA6C,eAA7C;AACA,SAASC,qBAAT,QAAsC,gCAAtC;AACA,OAAOC,eAAP,MAA4B,mDAA5B;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,oBAAT,QAAqC,oBAArC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,OAAO,MAAMC,OAAO,GAAGZ,oBAAoB,EAApC;AAEP,MAAMa,SAAS,GAAG,EAAlB;AACA,MAAMC,UAAU,GAAG,CAACf,gBAAgB,CAACa,OAAD,CAAjB,EAA4BH,KAA5B,EAAmCC,oBAAnC,CAAnB;AAEA,MAAMK,aAAa,GAAG;AAClBC,EAAAA,GAAG,EAAE,MADa;AAElBR,EAAAA,OAFkB;AAGlBS,EAAAA,SAAS,EAAE,CAAC,MAAD,CAHO;AAIlBC,EAAAA,eAAe,EAAEX,eAJC;AAKlBY,EAAAA,UAAU,EAAE,CAACb,qBAAqB,CAAC,MAAD,EAAS,CAAC,QAAD,EAAW,OAAX,EAAoB,MAApB,CAAT,CAAtB;AALM,CAAtB;;AAQA,IAAIc,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AACxC,QAAMC,iBAAiB,GAClBC,MAAM,IAAKA,MAAD,CAAgBC,oCAA3B,IAAoEvB,OADxE;;AAGA,MAAI,OAAOqB,iBAAP,KAA6B,UAAjC,EAA6C;AACzCV,IAAAA,SAAS,CAACa,IAAV,CAAeH,iBAAiB,EAAhC;AACH;AACJ;;AAED,MAAMI,iBAAiB,GAAGzB,OAAO,CAACD,eAAe,CAAC,GAAGa,UAAJ,CAAhB,EAAiC,GAAGD,SAApC,CAAjC;AAEA,MAAMe,gBAAgB,GAAGxB,cAAc,CAACW,aAAD,EAAgBJ,WAAW,CAACC,OAAD,CAA3B,CAAvC;AAEA,MAAMiB,KAAK,GAAG1B,WAAW,CAACyB,gBAAD,EAAmBD,iBAAnB,CAAzB;AAEA,OAAO,MAAMG,SAAS,GAAGzB,YAAY,CAACwB,KAAD,CAA9B;AAEP,eAAeA,KAAf","sourcesContent":["import { routerMiddleware } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { persistReducer, persistStore } from 'redux-persist';\nimport { createWhitelistFilter } from 'redux-persist-transform-filter';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport storage from 'redux-persist/lib/storage';\nimport thunk from 'redux-thunk';\nimport { onApiUnauthenticated } from '../middleware/auth';\nimport rootReducer from './rootReducer';\n\nexport const history = createBrowserHistory();\n\nconst enhancers = [];\nconst middleware = [routerMiddleware(history), thunk, onApiUnauthenticated];\n\nconst persistConfig = {\n    key: 'root',\n    storage,\n    whitelist: ['auth'],\n    stateReconciler: autoMergeLevel2,\n    transforms: [createWhitelistFilter('auth', ['isAuth', 'token', 'user'])],\n};\n\nif (process.env.NODE_ENV === 'development') {\n    const devToolsExtension =\n        (window && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\n\n    if (typeof devToolsExtension === 'function') {\n        enhancers.push(devToolsExtension());\n    }\n}\n\nconst composedEnhancers = compose(applyMiddleware(...middleware), ...enhancers);\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer(history));\n\nconst store = createStore(persistedReducer, composedEnhancers);\n\nexport const persistor = persistStore(store);\n\nexport default store;\n"]},"metadata":{},"sourceType":"module"}