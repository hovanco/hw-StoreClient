{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/StoreClient/src/pages/order/components/add-customer/add-customer-form.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Col, Form, Input, message, Row, Select } from 'antd';\nimport TextArea from 'antd/lib/input/TextArea';\nimport { get, map } from 'lodash';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport customerApi from '../../../../api/customer-api';\nimport { disabledAutosuggestion } from '../../../../helper';\nimport { useDistricts, useProvices, useWards } from '../../../../hook/useLocation';\nimport { useOrderNew } from '../../create/state/context';\nimport { useAddCustomer } from './context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddCustomerForm = ({\n  toggle\n}) => {\n  _s();\n\n  const store = useSelector(state => state.store.data);\n  const {\n    source\n  } = useOrderNew();\n  const {\n    selectCustomer\n  } = useAddCustomer();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [province, setProvince] = useState();\n  const [district, setDistrict] = useState();\n  const {\n    loadingProvince,\n    provinces\n  } = useProvices();\n  const {\n    loadingDistrict,\n    districts\n  } = useDistricts(province);\n  const {\n    loadingWard,\n    wards\n  } = useWards({\n    province,\n    district\n  });\n\n  const onChangeProvince = e => {\n    setProvince(e);\n    removeField('district');\n    removeField('ward');\n  };\n\n  const onChangeDistrict = e => {\n    setDistrict(e);\n    removeField('ward');\n  };\n\n  const removeField = field => {\n    form.setFieldsValue({\n      [field]: undefined\n    });\n  };\n\n  const onSubmit = async values => {\n    try {\n      setLoading(true);\n      const {\n        name,\n        email,\n        phoneNo,\n        address,\n        province,\n        district,\n        ward\n      } = values;\n      const customer = await customerApi.createCustomer({\n        storeId: store._id,\n        formData: {\n          name,\n          email,\n          phoneNo,\n          address,\n          province,\n          district,\n          ward,\n          source\n        }\n      });\n      message.success('Đã tạo khách hàng thành công');\n      selectCustomer(customer);\n      toggle && toggle();\n    } catch (error) {\n      if (get(error, 'response.status') === 409) {\n        message.error('Số điện thoại đã tồn tại');\n      } else {\n        message.error('Xảy ra lỗi, vui lòng thử lại');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    layout: \"vertical\",\n    onFinish: onSubmit,\n    form: form,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      gutter: 15,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"T\\xEAn kh\\xE1ch h\\xE0ng\",\n          name: \"name\",\n          rules: [{\n            required: true,\n            message: 'Điền tên khách hàng '\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u0110i\\u1EC1n t\\xEAn kh\\xE1ch h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n          name: \"phoneNo\",\n          rules: [{\n            required: true,\n            message: 'Điền số điện thoại'\n          }, {\n            pattern: new RegExp(/(84|0[3|5|7|8|9])+([0-9]{8})\\b/g),\n            // pattern: new RegExp(/^(0|\\+84)(9|3|7|8|5){1}([0-9]{8})$/g),\n            message: 'Số điện thoại không đúng'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u0110i\\u1EC1n s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Email\",\n          name: \"email\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u0110i\\u1EC1n email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"T\\u1EC9nh/Th\\xE0nh ph\\u1ED1\",\n          name: \"province\",\n          rules: [{\n            required: true,\n            message: 'Chọn tỉnh/thành phố '\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Ch\\u1ECDn t\\u1EC9nh/th\\xE0nh ph\\u1ED1\",\n            showSearch: true,\n            style: {\n              width: '100%'\n            },\n            optionFilterProp: \"children\",\n            onChange: onChangeProvince,\n            filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n            loading: loadingProvince,\n            onFocus: disabledAutosuggestion,\n            children: map(provinces, province => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: province.code,\n              children: province.name\n            }, province.code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Qu\\u1EADn/Huy\\u1EC7n\",\n          name: \"district\",\n          rules: [{\n            required: true,\n            message: 'Chọn qnận huyện'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Ch\\u1ECDn x\\xE3/ph\\u01B0\\u1EDDng\",\n            showSearch: true,\n            style: {\n              width: '100%'\n            },\n            optionFilterProp: \"children\",\n            onChange: onChangeDistrict,\n            filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n            loading: loadingDistrict,\n            disabled: !province,\n            onFocus: disabledAutosuggestion,\n            children: map(districts, district => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: district.code,\n              children: district.name\n            }, district.code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"X\\xE3/Ph\\u01B0\\u1EDDng\",\n          name: \"ward\",\n          rules: [{\n            required: true,\n            message: 'Điền tên xã phường'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Ch\\u1ECDn x\\xE3/ph\\u01B0\\u1EDDng\",\n            showSearch: true,\n            filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n            disabled: !province || !district,\n            loading: loadingWard,\n            onFocus: disabledAutosuggestion,\n            children: map(wards, ward => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: ward.code,\n              children: ward.name\n            }, ward.code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u0110\\u1ECBa ch\\u1EC9 kh\\xE1ch h\\xE0ng\",\n          name: \"address\",\n          rules: [{\n            required: true,\n            message: 'Điền địa chỉ'\n          }],\n          children: /*#__PURE__*/_jsxDEV(TextArea, {\n            placeholder: \"\\u0110i\\u1EC1n \\u0111\\u1ECBa ch\\u1EC9 kh\\xE1ch h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      align: \"middle\",\n      justify: \"end\",\n      gutter: 15,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          disabled: loading,\n          onClick: toggle,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          loading: loading,\n          children: \"Th\\xEAm m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddCustomerForm, \"SsuFMN6oKcZHKwFXU9vzV1ZmOUY=\", false, function () {\n  return [useSelector, useOrderNew, useAddCustomer, Form.useForm, useProvices, useDistricts, useWards];\n});\n\n_c = AddCustomerForm;\nexport default AddCustomerForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddCustomerForm\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/StoreClient/src/pages/order/components/add-customer/add-customer-form.tsx"],"names":["Button","Col","Form","Input","message","Row","Select","TextArea","get","map","React","useState","useSelector","customerApi","disabledAutosuggestion","useDistricts","useProvices","useWards","useOrderNew","useAddCustomer","AddCustomerForm","toggle","store","state","data","source","selectCustomer","form","useForm","loading","setLoading","province","setProvince","district","setDistrict","loadingProvince","provinces","loadingDistrict","districts","loadingWard","wards","onChangeProvince","e","removeField","onChangeDistrict","field","setFieldsValue","undefined","onSubmit","values","name","email","phoneNo","address","ward","customer","createCustomer","storeId","_id","formData","success","error","required","pattern","RegExp","width","input","option","children","toLowerCase","indexOf","code"],"mappings":"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","sourcesContent":["import { Button, Col, Form, Input, message, Row, Select } from 'antd';\nimport { Store } from 'antd/lib/form/interface';\nimport TextArea from 'antd/lib/input/TextArea';\nimport { get, map } from 'lodash';\nimport React, { FC, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport customerApi from '../../../../api/customer-api';\nimport { disabledAutosuggestion } from '../../../../helper';\nimport { useDistricts, useProvices, useWards } from '../../../../hook/useLocation';\nimport { useOrderNew } from '../../create/state/context';\nimport { useAddCustomer } from './context';\nimport { District, Province, Ward } from './interface';\n\ninterface Props {\n    toggle?: () => void;\n}\n\nconst AddCustomerForm: FC<Props> = ({ toggle }) => {\n    const store = useSelector((state: any) => state.store.data);\n\n    const { source } = useOrderNew();\n    const { selectCustomer } = useAddCustomer();\n    const [form] = Form.useForm();\n\n    const [loading, setLoading] = useState<boolean>(false);\n    const [province, setProvince] = useState<string>();\n    const [district, setDistrict] = useState<string>();\n\n    const { loadingProvince, provinces } = useProvices();\n    const { loadingDistrict, districts } = useDistricts(province);\n    const { loadingWard, wards } = useWards({ province, district });\n\n    const onChangeProvince = (e: string) => {\n        setProvince(e);\n\n        removeField('district');\n        removeField('ward');\n    };\n\n    const onChangeDistrict = (e: string) => {\n        setDistrict(e);\n\n        removeField('ward');\n    };\n\n    const removeField = (field: string) => {\n        form.setFieldsValue({\n            [field]: undefined,\n        });\n    };\n\n    const onSubmit = async (values: Store) => {\n        try {\n            setLoading(true);\n\n            const { name, email, phoneNo, address, province, district, ward } = values;\n\n            const customer = await customerApi.createCustomer({\n                storeId: store._id,\n                formData: {\n                    name,\n                    email,\n                    phoneNo,\n                    address,\n                    province,\n                    district,\n                    ward,\n                    source,\n                },\n            });\n\n            message.success('Đã tạo khách hàng thành công');\n            selectCustomer(customer);\n            toggle && toggle();\n        } catch (error) {\n            if (get(error, 'response.status') === 409) {\n                message.error('Số điện thoại đã tồn tại');\n            } else {\n                message.error('Xảy ra lỗi, vui lòng thử lại');\n            }\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Form layout='vertical' onFinish={onSubmit} form={form}>\n            <Row gutter={15}>\n                <Col span={12}>\n                    <Form.Item\n                        label='Tên khách hàng'\n                        name='name'\n                        rules={[{ required: true, message: 'Điền tên khách hàng ' }]}\n                    >\n                        <Input placeholder='Điền tên khách hàng' />\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item\n                        label='Số điện thoại'\n                        name='phoneNo'\n                        rules={[\n                            { required: true, message: 'Điền số điện thoại' },\n\n                            {\n                                pattern: new RegExp(/(84|0[3|5|7|8|9])+([0-9]{8})\\b/g),\n                                // pattern: new RegExp(/^(0|\\+84)(9|3|7|8|5){1}([0-9]{8})$/g),\n                                message: 'Số điện thoại không đúng',\n                            },\n                        ]}\n                    >\n                        <Input placeholder='Điền số điện thoại' />\n                    </Form.Item>\n                </Col>\n\n                {/* <Col span={12}>\n                    <Form.Item label='Ngày sinh'>\n                        <DatePicker style={{ width: '100%' }} />\n                    </Form.Item>\n                </Col> */}\n\n                <Col span={12}>\n                    <Form.Item label='Email' name='email'>\n                        <Input placeholder='Điền email' />\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item\n                        label='Tỉnh/Thành phố'\n                        name='province'\n                        rules={[{ required: true, message: 'Chọn tỉnh/thành phố ' }]}\n                    >\n                        <Select\n                            placeholder='Chọn tỉnh/thành phố'\n                            showSearch\n                            style={{ width: '100%' }}\n                            optionFilterProp='children'\n                            onChange={onChangeProvince}\n                            filterOption={(input: string, option: any) =>\n                                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                            }\n                            loading={loadingProvince}\n                            onFocus={disabledAutosuggestion}\n                        >\n                            {map(provinces, (province: Province) => (\n                                <Select.Option value={province.code} key={province.code}>\n                                    {province.name}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item\n                        label='Quận/Huyện'\n                        name='district'\n                        rules={[{ required: true, message: 'Chọn qnận huyện' }]}\n                    >\n                        <Select\n                            placeholder='Chọn xã/phường'\n                            showSearch\n                            style={{ width: '100%' }}\n                            optionFilterProp='children'\n                            onChange={onChangeDistrict}\n                            filterOption={(input: string, option: any) =>\n                                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                            }\n                            loading={loadingDistrict}\n                            disabled={!province}\n                            onFocus={disabledAutosuggestion}\n                        >\n                            {map(districts, (district: District) => (\n                                <Select.Option value={district.code} key={district.code}>\n                                    {district.name}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item\n                        label='Xã/Phường'\n                        name='ward'\n                        rules={[{ required: true, message: 'Điền tên xã phường' }]}\n                    >\n                        <Select\n                            placeholder='Chọn xã/phường'\n                            showSearch\n                            filterOption={(input, option: any) =>\n                                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                            }\n                            disabled={!province || !district}\n                            loading={loadingWard}\n                            onFocus={disabledAutosuggestion}\n                        >\n                            {map(wards, (ward: Ward) => (\n                                <Select.Option value={ward.code} key={ward.code}>\n                                    {ward.name}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                </Col>\n\n                <Col span={24}>\n                    <Form.Item\n                        label='Địa chỉ khách hàng'\n                        name='address'\n                        rules={[{ required: true, message: 'Điền địa chỉ' }]}\n                    >\n                        <TextArea placeholder='Điền địa chỉ khách hàng' />\n                    </Form.Item>\n                </Col>\n            </Row>\n\n            <Row align='middle' justify='end' gutter={15}>\n                <Col>\n                    <Button disabled={loading} onClick={toggle}>\n                        Hủy\n                    </Button>\n                </Col>\n                <Col>\n                    <Button type='primary' htmlType='submit' loading={loading}>\n                        Thêm mới\n                    </Button>\n                </Col>\n            </Row>\n        </Form>\n    );\n};\n\nexport default AddCustomerForm;\n"]},"metadata":{},"sourceType":"module"}