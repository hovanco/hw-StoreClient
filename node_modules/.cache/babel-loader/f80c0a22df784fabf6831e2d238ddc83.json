{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/StoreClient/src/pages/delivery/overview/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { Col, Row, Space, Typography } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport orderApi from '../../../api/order-api';\nimport { Loading, PageTopWrapper, SelectTime, Warehouses } from '../../../components';\nimport { ETypeTime } from '../../../components/select-time';\nimport { getEndTime, getStartTime } from '../../../helper/get-time';\nimport { DefaultLayout } from '../../../layout';\nimport { CodStatus, StatusCounts } from './components';\nimport './style.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ms_of_day = 24 * 60 * 60 * 1000;\n\nconst getTimes = ({\n  type,\n  date\n}) => {\n  const startTime = getStartTime({\n    type,\n    date: date && date.length > 0 ? date[0] : date\n  });\n  const endTime = getEndTime({\n    type,\n    date: date && date.length > 0 ? date[1] : date\n  });\n  return [startTime, endTime];\n};\n\nfunction OverviewDelivery() {\n  _s();\n\n  const store = useSelector(state => state.store.data);\n  const [times, setTimes] = useState(getTimes({\n    type: 'month'\n  }));\n  const [loading, setLoading] = useState(true);\n  const [deliveryStatus, setDeliveryStatus] = useState();\n  const [warehouse, setWarehouse] = useState();\n\n  const selectWareHouse = warehouseId => {\n    setWarehouse(warehouseId);\n  };\n\n  const selectTime = ({\n    typeTime,\n    times\n  }) => {\n    const getType = () => {\n      if (typeTime === ETypeTime.today || typeTime === ETypeTime.yesterday) return 'day';\n      if (typeTime === ETypeTime.seven_days_ago || typeTime === ETypeTime.custom) return 'custom';\n      return 'month';\n    };\n\n    const getDate = () => {\n      if (typeTime === ETypeTime.today) return Date.now();\n      if (typeTime === ETypeTime.yesterday) return Date.now() - ms_of_day;\n\n      if (typeTime === ETypeTime.seven_days_ago) {\n        const startTime = Date.now() - ms_of_day * 7;\n        const endTime = Date.now() - ms_of_day;\n        return [startTime, endTime];\n      }\n\n      if (typeTime === ETypeTime.custom) {\n        return times;\n      }\n\n      return undefined;\n    };\n\n    if (getType() === 'custom') {\n      setTimes(getDate());\n    } else {\n      setTimes(getTimes({\n        type: getType(),\n        date: getDate()\n      }));\n    }\n  };\n\n  useEffect(() => {\n    async function loadDeliveryStatus(storeId) {\n      try {\n        setLoading(true);\n        const response = await orderApi.getDeliveryStatus({\n          storeId,\n          warehouseId: warehouse || store.warehouseId,\n          startTime: times[0],\n          endTime: times[1]\n        });\n        setDeliveryStatus(response);\n      } catch (error) {} finally {\n        setLoading(false);\n      }\n    }\n\n    if (store._id) {\n      loadDeliveryStatus(store._id);\n    }\n  }, [times, store._id, warehouse, store.warehouseId]);\n\n  const renderContent = () => {\n    if (loading) return /*#__PURE__*/_jsxDEV(Loading, {\n      full: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }, this);\n    if (!deliveryStatus) return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 37\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Row, {\n      justify: \"space-between\",\n      className: \"order-create delivery\",\n      gutter: 16,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: \"15\",\n        children: /*#__PURE__*/_jsxDEV(StatusCounts, {\n          statusCounts: deliveryStatus.statusCounts,\n          times: times\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: \"9\",\n        children: /*#__PURE__*/_jsxDEV(CodStatus, {\n          codStatus: deliveryStatus.codStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(DefaultLayout, {\n    title: \"Delivery Overview\",\n    children: [/*#__PURE__*/_jsxDEV(PageTopWrapper, {\n      leftContent: /*#__PURE__*/_jsxDEV(Typography.Title, {\n        level: 3,\n        style: {\n          marginBottom: 0\n        },\n        children: \"T\\u1ED5ng quan v\\u1EADn chuy\\u1EC3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this),\n      rightContent: /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Warehouses, {\n          warehouseId: warehouse,\n          selectWareHouse: selectWareHouse\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(SelectTime, {\n          onChange: selectTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OverviewDelivery, \"Mjp0dpi+mLjXhqlP6+oXIuP0eCU=\", false, function () {\n  return [useSelector];\n});\n\n_c = OverviewDelivery;\nexport default OverviewDelivery;\n\nvar _c;\n\n$RefreshReg$(_c, \"OverviewDelivery\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/StoreClient/src/pages/delivery/overview/index.tsx"],"names":["Col","Row","Space","Typography","React","useEffect","useState","useSelector","orderApi","Loading","PageTopWrapper","SelectTime","Warehouses","ETypeTime","getEndTime","getStartTime","DefaultLayout","CodStatus","StatusCounts","ms_of_day","getTimes","type","date","startTime","length","endTime","OverviewDelivery","store","state","data","times","setTimes","loading","setLoading","deliveryStatus","setDeliveryStatus","warehouse","setWarehouse","selectWareHouse","warehouseId","selectTime","typeTime","getType","today","yesterday","seven_days_ago","custom","getDate","Date","now","undefined","loadDeliveryStatus","storeId","response","getDeliveryStatus","error","_id","renderContent","statusCounts","codStatus","marginBottom"],"mappings":"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","sourcesContent":["import { Col, Row, Space, Typography } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport orderApi from '../../../api/order-api';\nimport { Loading, PageTopWrapper, SelectTime, Warehouses } from '../../../components';\nimport { ETypeTime } from '../../../components/select-time';\nimport { getEndTime, getStartTime, ITypeTime } from '../../../helper/get-time';\nimport { DefaultLayout } from '../../../layout';\nimport { IState } from '../../../store/rootReducer';\nimport { CodStatus, StatusCounts } from './components';\nimport './style.less';\n\nconst ms_of_day = 24 * 60 * 60 * 1000;\n\nconst getTimes = ({ type, date }: { type: ITypeTime; date?: any }): number[] => {\n    const startTime = getStartTime({\n        type,\n        date: date && date.length > 0 ? date[0] : date,\n    });\n    const endTime = getEndTime({\n        type,\n        date: date && date.length > 0 ? date[1] : date,\n    });\n\n    return [startTime, endTime];\n};\n\nfunction OverviewDelivery() {\n    const store = useSelector((state: IState) => state.store.data);\n    const [times, setTimes] = useState<number[] | any>(getTimes({ type: 'month' }));\n\n    const [loading, setLoading] = useState<boolean>(true);\n\n    const [deliveryStatus, setDeliveryStatus] = useState<any>();\n\n    const [warehouse, setWarehouse] = useState<string>();\n\n    const selectWareHouse = (warehouseId: string) => {\n        setWarehouse(warehouseId);\n    };\n\n    const selectTime = ({ typeTime, times }: { typeTime: ETypeTime; times?: number[] }) => {\n        const getType = (): ITypeTime => {\n            if (typeTime === ETypeTime.today || typeTime === ETypeTime.yesterday) return 'day';\n            if (typeTime === ETypeTime.seven_days_ago || typeTime === ETypeTime.custom)\n                return 'custom';\n\n            return 'month';\n        };\n\n        const getDate = () => {\n            if (typeTime === ETypeTime.today) return Date.now();\n\n            if (typeTime === ETypeTime.yesterday) return Date.now() - ms_of_day;\n\n            if (typeTime === ETypeTime.seven_days_ago) {\n                const startTime = Date.now() - ms_of_day * 7;\n                const endTime = Date.now() - ms_of_day;\n\n                return [startTime, endTime];\n            }\n\n            if (typeTime === ETypeTime.custom) {\n                return times;\n            }\n\n            return undefined;\n        };\n        if (getType() === 'custom') {\n            setTimes(getDate());\n        } else {\n            setTimes(\n                getTimes({\n                    type: getType(),\n                    date: getDate(),\n                })\n            );\n        }\n    };\n\n    useEffect(() => {\n        async function loadDeliveryStatus(storeId: string) {\n            try {\n                setLoading(true);\n                const response = await orderApi.getDeliveryStatus({\n                    storeId,\n                    warehouseId: warehouse || store.warehouseId,\n                    startTime: times[0],\n                    endTime: times[1],\n                });\n\n                setDeliveryStatus(response);\n            } catch (error) {\n            } finally {\n                setLoading(false);\n            }\n        }\n\n        if (store._id) {\n            loadDeliveryStatus(store._id);\n        }\n    }, [times, store._id, warehouse, store.warehouseId]);\n\n    const renderContent = () => {\n        if (loading) return <Loading full />;\n\n        if (!deliveryStatus) return <div />;\n\n        return (\n            <Row justify=\"space-between\" className=\"order-create delivery\" gutter={16}>\n                <Col span=\"15\">\n                    <StatusCounts statusCounts={deliveryStatus.statusCounts} times={times} />\n                </Col>\n\n                <Col span=\"9\">\n                    <CodStatus codStatus={deliveryStatus.codStatus} />\n                </Col>\n            </Row>\n        );\n    };\n\n    return (\n        <DefaultLayout title=\"Delivery Overview\">\n            <PageTopWrapper\n                leftContent={\n                    <Typography.Title level={3} style={{ marginBottom: 0 }}>\n                        Tổng quan vận chuyển\n                    </Typography.Title>\n                }\n                rightContent={\n                    <Space>\n                        <Warehouses warehouseId={warehouse} selectWareHouse={selectWareHouse} />\n\n                        <SelectTime onChange={selectTime} />\n                    </Space>\n                }\n            />\n            <div className=\"content\">{renderContent()}</div>\n        </DefaultLayout>\n    );\n}\nexport default OverviewDelivery;\n"]},"metadata":{},"sourceType":"module"}