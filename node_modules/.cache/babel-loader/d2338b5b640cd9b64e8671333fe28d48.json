{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/StoreClient/src/components/sider/navigation.tsx\",\n    _s = $RefreshSig$();\n\nimport { Menu } from 'antd';\nimport { some } from 'lodash';\nimport React, { memo, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link, useLocation } from 'react-router-dom';\nimport { ActionUserIcon, BoxIcon, EcommerceDeliveryIcon, LayoutLeftMenuIcon, NavOrderSvgIcon, ReportIcon, SettingIcon } from '../../assets/icon';\nimport iconAddCircle from \"../../assets/images/ic-actions-add.svg\";\nimport { SALE_CHANNEL_DATA } from '../../constants/sale-channels';\nimport { EUserRole } from '../../models';\nimport { Scrollbar } from '../index';\nimport AddSellChannel from './add-sell-channel';\nimport './style.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const menus = [{\n  title: 'Tổng quan',\n  href: '/',\n  icon: /*#__PURE__*/_jsxDEV(LayoutLeftMenuIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 15\n  }, this)\n}, {\n  title: 'Đơn hàng',\n  href: '/orders',\n  icon: /*#__PURE__*/_jsxDEV(NavOrderSvgIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 15\n  }, this),\n  children: [{\n    title: 'Tạo đơn hàng',\n    href: '/orders/new'\n  }, {\n    title: 'Danh sách đơn hàng',\n    href: '/orders/list',\n    otherHref: ['/orders/order']\n  } // TODO: Show after add feature\n  // {\n  //     title: 'Khách trả hàng',\n  //     href: '/orders/returned',\n  // },\n  ]\n}, {\n  title: 'Vận chuyển',\n  href: '/delivery',\n  icon: /*#__PURE__*/_jsxDEV(EcommerceDeliveryIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 15\n  }, this),\n  children: [{\n    title: 'Tổng quan',\n    href: '/delivery/overview'\n  }, {\n    title: 'Quản lý vận chuyển',\n    href: '/delivery/list',\n    otherHref: ['/delivery/detail']\n  }]\n}, {\n  title: 'Sản phẩm',\n  href: '/products',\n  icon: /*#__PURE__*/_jsxDEV(BoxIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 15\n  }, this),\n  children: [{\n    title: 'Danh sách sản phẩm',\n    href: '/products/list',\n    otherHref: ['/products/new', '/products/detail']\n  }, {\n    title: 'Quản lý kho',\n    href: '/inventory/list',\n    otherHref: ['/inventory/new']\n  } // TODO: Show after add feature\n  // {\n  //     title: 'Đơn nhập kho',\n  //     href: '/warehouse/list',\n  // },\n  // {\n  //     title: 'Nhà cung cấp',\n  //     href: '/supplier/list',\n  //     otherHref: ['supplier/new'],\n  // },\n  ]\n}, {\n  title: 'Khách hàng',\n  href: '/customers',\n  icon: /*#__PURE__*/_jsxDEV(ActionUserIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 15\n  }, this)\n}, {\n  title: 'Báo cáo',\n  href: 'report',\n  icon: /*#__PURE__*/_jsxDEV(ReportIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 15\n  }, this),\n  children: [{\n    title: 'Báo cáo bán hàng',\n    href: '/reports/sale'\n  },\n  /* { */\n\n  /*     title: 'Báo cáo nhập hàng', */\n\n  /*     href: '/reports/warehouse', */\n\n  /* }, */\n\n  /* { */\n\n  /*     title: 'Báo cáo tài chính', */\n\n  /*     href: '/reports/financinal', */\n\n  /* }, */\n  {\n    title: 'Báo cáo khách hàng',\n    href: '/reports/customer'\n  }]\n}, {\n  title: 'Cài đặt',\n  href: '/setting',\n  icon: /*#__PURE__*/_jsxDEV(SettingIcon, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 15\n  }, this)\n}, {\n  title: 'KÊNH BÁN HÀNG',\n  href: '',\n  icon: iconAddCircle,\n  render: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"nav-sell-channel\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"\",\n      style: {\n        position: 'relative'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"K\\xCANH B\\xC1N H\\xC0NG\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(AddSellChannel, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 13\n  }, this)\n}];\n\nconst Navigation = () => {\n  _s();\n\n  const isCollapsed = useSelector(state => state.global.isCollapsed);\n  const store = useSelector(state => state.store.data);\n  const [saleChannelMenu, setSaleChannelMenu] = useState([]);\n  const [selectedKey, setSelectedKey] = useState(window.location.pathname);\n  const location = useLocation();\n  const {\n    data: storeObj\n  } = useSelector(({\n    store\n  }) => store);\n  const [openKeys, setOpenKeys] = useState([]);\n  const rootSubmenuKeys = menus.map(c => {\n    if (Boolean(c.children)) {\n      return c.href;\n    }\n\n    return '';\n  }).filter(c => !!c);\n  useEffect(() => {\n    let parentMenu;\n    let childrenMenu;\n\n    for (const menu of menus) {\n      parentMenu = menu;\n\n      if (!!menu.href && menu.href !== '/') {\n        if (menu.children) {\n          childrenMenu = menu.children.find(subMenu => location.pathname.includes(subMenu.href) || some(subMenu.otherHref, href => location.pathname.includes(href)));\n\n          if (childrenMenu) {\n            break;\n          }\n        } else if (location.pathname.includes(menu.href)) {\n          break;\n        }\n      }\n    }\n\n    if (parentMenu && childrenMenu) {\n      var _childrenMenu;\n\n      setSelectedKey(((_childrenMenu = childrenMenu) === null || _childrenMenu === void 0 ? void 0 : _childrenMenu.href) || location.pathname);\n      !isCollapsed && setOpenKeys([parentMenu.href]);\n    } else {\n      var _parentMenu;\n\n      setSelectedKey(((_parentMenu = parentMenu) === null || _parentMenu === void 0 ? void 0 : _parentMenu.href) || window.location.pathname);\n      setOpenKeys([]);\n    }\n  }, [location, isCollapsed]);\n  useEffect(() => {\n    let saleChannelsAddedData = SALE_CHANNEL_DATA.filter(item => {\n      var _storeObj$saleChannel;\n\n      return storeObj === null || storeObj === void 0 ? void 0 : (_storeObj$saleChannel = storeObj.saleChannels) === null || _storeObj$saleChannel === void 0 ? void 0 : _storeObj$saleChannel.includes(item.id);\n    });\n    saleChannelsAddedData = saleChannelsAddedData.map(item => ({\n      title: item.menuTitle,\n      href: item.href,\n      render: /*#__PURE__*/_jsxDEV(Link, {\n        to: item.href,\n        className: \"custom-render-link\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"nav__icon anticon\",\n          style: {\n            backgroundImage: `url(${item.icon})`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: item.menuTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this)\n    }));\n    setSaleChannelMenu(saleChannelsAddedData);\n  }, [storeObj.saleChannels]);\n\n  const onOpenChange = keys => {\n    const latestOpenKey = keys.find(key => openKeys.indexOf(key) === -1);\n\n    if (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n      setOpenKeys(keys);\n    } else {\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n    }\n  };\n\n  const height = 'calc(100vh - 111px)';\n  const filterMenus = typeof (store === null || store === void 0 ? void 0 : store.role) === 'number' && [EUserRole.owner, EUserRole.manager].includes(store === null || store === void 0 ? void 0 : store.role) ? menus : menus.filter(item => item.href !== '/setting');\n  return /*#__PURE__*/_jsxDEV(Scrollbar, {\n    style: {\n      height,\n      marginTop: 64\n    },\n    renderThumbVertical: props => /*#__PURE__*/_jsxDEV(\"div\", { ...props,\n      className: \"thumb-vertical\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 50\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(Menu, {\n      mode: \"inline\",\n      theme: \"dark\",\n      className: \"nav__menu\",\n      defaultSelectedKeys: [selectedKey],\n      selectedKeys: [selectedKey],\n      onOpenChange: onOpenChange,\n      openKeys: openKeys,\n      children: [filterMenus.map(c => {\n        var _c$children;\n\n        return Boolean(c.children) ? /*#__PURE__*/_jsxDEV(Menu.SubMenu, {\n          icon: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [c.icon, /*#__PURE__*/_jsxDEV(\"span\", {\n              children: c.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 33\n          }, this),\n          children: (_c$children = c.children) === null || _c$children === void 0 ? void 0 : _c$children.map(sub => /*#__PURE__*/_jsxDEV(Menu.Item, {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: sub.href,\n              children: sub.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 37\n            }, this)\n          }, sub.href, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 33\n          }, this))\n        }, c.href, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Menu.Item, {\n          onClick: () => setOpenKeys([]),\n          children: c.render ? c.render : /*#__PURE__*/_jsxDEV(Link, {\n            to: c.href,\n            children: [c.icon, /*#__PURE__*/_jsxDEV(\"span\", {\n              children: c.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 33\n          }, this)\n        }, c.href, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 25\n        }, this);\n      }), saleChannelMenu.map(c => /*#__PURE__*/_jsxDEV(Menu.Item, {\n        onClick: () => setOpenKeys([]),\n        children: c.render ? c.render : /*#__PURE__*/_jsxDEV(Link, {\n          to: c.href,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"nav__icon anticon\",\n            style: {\n              backgroundImage: `url(${c.icon})`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: c.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 29\n        }, this)\n      }, c.href, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Navigation, \"hUN2zjOsH9B/phfz9rjdxACt+2M=\", false, function () {\n  return [useSelector, useSelector, useLocation, useSelector];\n});\n\n_c = Navigation;\nexport default _c2 = /*#__PURE__*/memo(Navigation);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Navigation\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/StoreClient/src/components/sider/navigation.tsx"],"names":["Menu","some","React","memo","useEffect","useState","useSelector","Link","useLocation","ActionUserIcon","BoxIcon","EcommerceDeliveryIcon","LayoutLeftMenuIcon","NavOrderSvgIcon","ReportIcon","SettingIcon","SALE_CHANNEL_DATA","EUserRole","Scrollbar","AddSellChannel","menus","title","href","icon","children","otherHref","iconAddCircle","render","position","Navigation","isCollapsed","state","global","store","data","saleChannelMenu","setSaleChannelMenu","selectedKey","setSelectedKey","window","location","pathname","storeObj","openKeys","setOpenKeys","rootSubmenuKeys","map","c","Boolean","filter","parentMenu","childrenMenu","menu","find","subMenu","includes","saleChannelsAddedData","item","saleChannels","id","menuTitle","backgroundImage","onOpenChange","keys","latestOpenKey","key","indexOf","height","filterMenus","role","owner","manager","marginTop","props","sub"],"mappings":"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","sourcesContent":["import { Menu } from 'antd';\nimport { some } from 'lodash';\nimport React, { FC, memo, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link, useLocation } from 'react-router-dom';\nimport {\n    ActionUserIcon,\n    BoxIcon,\n    EcommerceDeliveryIcon,\n    LayoutLeftMenuIcon,\n    NavOrderSvgIcon,\n    ReportIcon,\n    SettingIcon,\n} from '../../assets/icon';\nimport iconAddCircle from '../../assets/images/ic-actions-add.svg';\nimport { SALE_CHANNEL_DATA } from '../../constants/sale-channels';\nimport { EUserRole } from '../../models';\nimport { SaleChannel } from '../../models/sale-channel';\nimport { IStoreState } from '../../reducers/storeState/reducer';\nimport { IState } from '../../store/rootReducer';\nimport { Scrollbar } from '../index';\nimport AddSellChannel from './add-sell-channel';\nimport './style.less';\n\nexport interface MenuChildType {\n    href: string;\n    title: string;\n    icon?: JSX.Element | string;\n    children?: MenuChildType[];\n    render?: JSX.Element;\n    otherHref?: string[];\n}\n\nexport const menus: MenuChildType[] = [\n    {\n        title: 'Tổng quan',\n        href: '/',\n        icon: <LayoutLeftMenuIcon />,\n    },\n    {\n        title: 'Đơn hàng',\n        href: '/orders',\n        icon: <NavOrderSvgIcon />,\n        children: [\n            {\n                title: 'Tạo đơn hàng',\n                href: '/orders/new',\n            },\n            {\n                title: 'Danh sách đơn hàng',\n                href: '/orders/list',\n                otherHref: ['/orders/order'],\n            },\n            // TODO: Show after add feature\n            // {\n            //     title: 'Khách trả hàng',\n            //     href: '/orders/returned',\n            // },\n        ],\n    },\n    {\n        title: 'Vận chuyển',\n        href: '/delivery',\n        icon: <EcommerceDeliveryIcon />,\n        children: [\n            {\n                title: 'Tổng quan',\n                href: '/delivery/overview',\n            },\n            {\n                title: 'Quản lý vận chuyển',\n                href: '/delivery/list',\n                otherHref: ['/delivery/detail'],\n            },\n        ],\n    },\n    {\n        title: 'Sản phẩm',\n        href: '/products',\n        icon: <BoxIcon />,\n        children: [\n            {\n                title: 'Danh sách sản phẩm',\n                href: '/products/list',\n                otherHref: ['/products/new', '/products/detail'],\n            },\n            {\n                title: 'Quản lý kho',\n                href: '/inventory/list',\n                otherHref: ['/inventory/new'],\n            },\n            // TODO: Show after add feature\n            // {\n            //     title: 'Đơn nhập kho',\n            //     href: '/warehouse/list',\n            // },\n            // {\n            //     title: 'Nhà cung cấp',\n            //     href: '/supplier/list',\n            //     otherHref: ['supplier/new'],\n            // },\n        ],\n    },\n    {\n        title: 'Khách hàng',\n        href: '/customers',\n        icon: <ActionUserIcon />,\n    },\n    {\n        title: 'Báo cáo',\n        href: 'report',\n        icon: <ReportIcon />,\n        children: [\n            {\n                title: 'Báo cáo bán hàng',\n                href: '/reports/sale',\n            },\n            /* { */\n            /*     title: 'Báo cáo nhập hàng', */\n            /*     href: '/reports/warehouse', */\n            /* }, */\n            /* { */\n            /*     title: 'Báo cáo tài chính', */\n            /*     href: '/reports/financinal', */\n            /* }, */\n            {\n                title: 'Báo cáo khách hàng',\n                href: '/reports/customer',\n            },\n        ],\n    },\n    {\n        title: 'Cài đặt',\n        href: '/setting',\n        icon: <SettingIcon />,\n    },\n    {\n        title: 'KÊNH BÁN HÀNG',\n        href: '',\n        icon: iconAddCircle,\n        render: (\n            <div className=\"nav-sell-channel\">\n                <Link to=\"\" style={{ position: 'relative' }}>\n                    <span>KÊNH BÁN HÀNG</span>\n                </Link>\n                <AddSellChannel />\n            </div>\n        ),\n    },\n];\n\ninterface IProps {}\n\nconst Navigation: FC<IProps> = () => {\n    const isCollapsed = useSelector((state: IState) => state.global.isCollapsed);\n    const store = useSelector((state: IState) => state.store.data);\n\n    const [saleChannelMenu, setSaleChannelMenu] = useState<MenuChildType[]>([]);\n    const [selectedKey, setSelectedKey] = useState<string>(window.location.pathname);\n    const location = useLocation();\n    const { data: storeObj } = useSelector(({ store }: { store: IStoreState }) => store);\n    const [openKeys, setOpenKeys] = useState<string[]>([]);\n\n    const rootSubmenuKeys = menus\n        .map((c: MenuChildType) => {\n            if (Boolean(c.children)) {\n                return c.href;\n            }\n            return '';\n        })\n        .filter((c) => !!c);\n\n    useEffect(() => {\n        let parentMenu;\n        let childrenMenu;\n\n        for (const menu of menus) {\n            parentMenu = menu;\n            if (!!menu.href && menu.href !== '/') {\n                if (menu.children) {\n                    childrenMenu = menu.children.find(\n                        (subMenu: MenuChildType) =>\n                            location.pathname.includes(subMenu.href) ||\n                            some(subMenu.otherHref, (href: string) =>\n                                location.pathname.includes(href)\n                            )\n                    );\n                    if (childrenMenu) {\n                        break;\n                    }\n                } else if (location.pathname.includes(menu.href)) {\n                    break;\n                }\n            }\n        }\n\n        if (parentMenu && childrenMenu) {\n            setSelectedKey(childrenMenu?.href || location.pathname);\n            !isCollapsed && setOpenKeys([parentMenu.href]);\n        } else {\n            setSelectedKey(parentMenu?.href || window.location.pathname);\n            setOpenKeys([]);\n        }\n    }, [location, isCollapsed]);\n\n    useEffect(() => {\n        let saleChannelsAddedData: any = SALE_CHANNEL_DATA.filter((item: SaleChannel) =>\n            storeObj?.saleChannels?.includes(item.id)\n        );\n\n        saleChannelsAddedData = saleChannelsAddedData.map((item: SaleChannel) => ({\n            title: item.menuTitle,\n            href: item.href,\n            render: (\n                <Link to={item.href} className=\"custom-render-link\">\n                    <span\n                        className=\"nav__icon anticon\"\n                        style={{ backgroundImage: `url(${item.icon})` }}\n                    ></span>\n                    <span>{item.menuTitle}</span>\n                </Link>\n            ),\n        }));\n\n        setSaleChannelMenu(saleChannelsAddedData);\n    }, [storeObj.saleChannels]);\n\n    const onOpenChange = (keys: any) => {\n        const latestOpenKey = keys.find((key: any) => openKeys.indexOf(key) === -1);\n        if (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n            setOpenKeys(keys);\n        } else {\n            setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n        }\n    };\n\n    const height = 'calc(100vh - 111px)';\n\n    const filterMenus =\n        typeof store?.role === 'number' &&\n        [EUserRole.owner, EUserRole.manager].includes(store?.role)\n            ? menus\n            : menus.filter((item) => item.href !== '/setting');\n\n    return (\n        <Scrollbar\n            style={{ height, marginTop: 64 }}\n            renderThumbVertical={(props: any) => <div {...props} className=\"thumb-vertical\" />}\n        >\n            <Menu\n                mode=\"inline\"\n                theme=\"dark\"\n                className=\"nav__menu\"\n                defaultSelectedKeys={[selectedKey]}\n                selectedKeys={[selectedKey]}\n                onOpenChange={onOpenChange}\n                openKeys={openKeys}\n            >\n                {filterMenus.map((c: MenuChildType) =>\n                    Boolean(c.children) ? (\n                        <Menu.SubMenu\n                            icon={\n                                <span>\n                                    {c.icon}\n                                    <span>{c.title}</span>\n                                </span>\n                            }\n                            key={c.href}\n                        >\n                            {c.children?.map((sub) => (\n                                <Menu.Item key={sub.href}>\n                                    <Link to={sub.href}>{sub.title}</Link>\n                                </Menu.Item>\n                            ))}\n                        </Menu.SubMenu>\n                    ) : (\n                        <Menu.Item key={c.href} onClick={() => setOpenKeys([])}>\n                            {c.render ? (\n                                c.render\n                            ) : (\n                                <Link to={c.href}>\n                                    {c.icon}\n                                    <span>{c.title}</span>\n                                </Link>\n                            )}\n                        </Menu.Item>\n                    )\n                )}\n\n                {saleChannelMenu.map((c: MenuChildType) => (\n                    <Menu.Item key={c.href} onClick={() => setOpenKeys([])}>\n                        {c.render ? (\n                            c.render\n                        ) : (\n                            <Link to={c.href}>\n                                <span\n                                    className=\"nav__icon anticon\"\n                                    style={{\n                                        backgroundImage: `url(${c.icon})`,\n                                    }}\n                                ></span>\n                                <span>{c.title}</span>\n                            </Link>\n                        )}\n                    </Menu.Item>\n                ))}\n            </Menu>\n        </Scrollbar>\n    );\n};\n\nexport default memo(Navigation);\n"]},"metadata":{},"sourceType":"module"}