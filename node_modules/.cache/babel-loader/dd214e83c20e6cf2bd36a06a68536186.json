{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/StoreClient/src/pages/setting/list-billings/packages-active.tsx\",\n    _s = $RefreshSig$();\n\nimport { Typography, Space, Row, Col, Card, Table } from 'antd';\nimport React from 'react';\nimport { useBilling } from '../create-billing/state/context';\nimport PackageActiveItem from './components/package-active-item';\nimport PackageName from './components/package-name';\nimport { EBillingPaymentTypeName } from '../../../api/billing-api';\nimport formatMoney from '../../../helper/format-money';\nimport { formatDate } from '../../../helper/format';\nimport { convertPackages } from '../../../helper/convert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Text\n} = Typography;\nconst columns = [{\n  title: 'Tên gói dịch vụ',\n  dataIndex: 'names',\n  key: 'names',\n  render: names => {\n    return names.map((item, index) => /*#__PURE__*/_jsxDEV(Row, {\n      align: \"middle\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 11,\n        children: /*#__PURE__*/_jsxDEV(PackageName, {\n          small: true,\n          title: item.alias,\n          bgColor: item.color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 11,\n        offset: 1,\n        className: \"col-name\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          className: \"text-info\",\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          className: \"text-info\",\n          children: item.period\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 21\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 17\n    }, this));\n  },\n  align: 'center'\n}, {\n  title: 'Ngày đăng ký',\n  dataIndex: 'registeredAt',\n  key: 'registeredAt',\n  align: 'center'\n}, {\n  title: 'Ngày kết thúc',\n  dataIndex: 'expiredAt',\n  key: 'expiredAt',\n  align: 'center'\n}, {\n  title: 'Hình thức thanh toán',\n  dataIndex: 'paymentType',\n  key: 'paymentType',\n  align: 'center'\n}, {\n  title: 'Đơn giá',\n  dataIndex: 'price',\n  key: 'price',\n  align: 'center'\n}, {\n  title: 'Tổng thanh toán',\n  dataIndex: 'total',\n  key: 'total',\n  align: 'center',\n  render: (value, row, index) => {\n    const obj = {\n      children: value.price,\n      props: {}\n    };\n\n    if (value.rowSpan3) {\n      obj.props.rowSpan = 3;\n    }\n\n    if (value.rowSpan2) {\n      obj.props.rowSpan = 2;\n    }\n\n    if (value.rowSpan0) {\n      obj.props.rowSpan = 0;\n    }\n\n    return obj;\n  }\n}];\n\nfunction convertPackagesByTransactioncode(pkgs) {\n  const list = {};\n  pkgs.forEach(item => {\n    list[item === null || item === void 0 ? void 0 : item.transactionCode] = [];\n  });\n  pkgs.forEach(item => {\n    list[item.transactionCode].push(item);\n  });\n  return Object.values(list);\n}\n\nfunction PackagesActive() {\n  _s();\n\n  const {\n    packagesActive,\n    packagesInactive,\n    packages,\n    listHistoryPayment\n  } = useBilling();\n  const packagesActiveToShow = convertPackages(packagesActive);\n  const listHistoryPaymentShow = convertPackages(listHistoryPayment);\n  const packagesInactiveToShow = convertPackages(packagesInactive);\n  const listActivePackage = convertPackagesByTransactioncode(packagesActiveToShow);\n  const listInactivePackage = convertPackagesByTransactioncode(packagesInactiveToShow);\n  const listActives = listActivePackage.map((item, index) => /*#__PURE__*/_jsxDEV(PackageActiveItem, {\n    data: item\n  }, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 9\n  }, this));\n  const listInactive = listInactivePackage.map((item, index) => /*#__PURE__*/_jsxDEV(PackageActiveItem, {\n    data: item\n  }, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this));\n  const dataSourceShow = listHistoryPaymentShow === null || listHistoryPaymentShow === void 0 ? void 0 : listHistoryPaymentShow.map((item, index) => {\n    const pkg = packages.find(pkg => pkg.code === item.packageType);\n    const cycleObj = pkg === null || pkg === void 0 ? void 0 : pkg.cycles.find(cycle => cycle.id === item.period);\n    let rowSpan3 = false;\n    let rowSpan2 = false;\n    let rowSpan0 = false;\n    let preItem = packagesActiveToShow[index - 1];\n    let nextItem = packagesActiveToShow[index + 1];\n    let thenItem = packagesActiveToShow[index + 2];\n    let listTransCode = [item === null || item === void 0 ? void 0 : item.transactionCode];\n    let order = 1;\n\n    if (listTransCode.includes(thenItem === null || thenItem === void 0 ? void 0 : thenItem.transactionCode) && listTransCode.includes(nextItem === null || nextItem === void 0 ? void 0 : nextItem.transactionCode)) {\n      rowSpan3 = true;\n      order = index;\n    }\n\n    if (listTransCode.includes(preItem === null || preItem === void 0 ? void 0 : preItem.transactionCode)) {\n      rowSpan0 = true;\n      order = index - 1;\n    }\n\n    if (!listTransCode.includes(preItem === null || preItem === void 0 ? void 0 : preItem.transactionCode) && listTransCode.includes(nextItem === null || nextItem === void 0 ? void 0 : nextItem.transactionCode)) {\n      rowSpan2 = true;\n      order = index;\n    }\n\n    return {\n      key: index,\n      names: [{\n        alias: pkg === null || pkg === void 0 ? void 0 : pkg.alias,\n        name: pkg === null || pkg === void 0 ? void 0 : pkg.package,\n        period: cycleObj === null || cycleObj === void 0 ? void 0 : cycleObj.name,\n        color: pkg === null || pkg === void 0 ? void 0 : pkg.color,\n        icon: pkg === null || pkg === void 0 ? void 0 : pkg.icon\n      }],\n      expiredAt: formatDate(item === null || item === void 0 ? void 0 : item.expiredAt),\n      registeredAt: formatDate(item === null || item === void 0 ? void 0 : item.createdAt),\n      paymentType: EBillingPaymentTypeName[item === null || item === void 0 ? void 0 : item.paymentType],\n      price: formatMoney((cycleObj === null || cycleObj === void 0 ? void 0 : cycleObj.price) || 0),\n      total: {\n        price: formatMoney((item === null || item === void 0 ? void 0 : item.total) || 0),\n        rowSpan2,\n        rowSpan0,\n        rowSpan3,\n        order\n      }\n    };\n  });\n  const headStyle = {\n    backgroundColor: '#f6f8f8'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"packages-content\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        span: 18,\n        offset: 3,\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          direction: \"vertical\",\n          size: 16,\n          style: {\n            width: '100%'\n          },\n          children: [packagesActive.length > 0 && /*#__PURE__*/_jsxDEV(Card, {\n            title: \"G\\xF3i \\u0111ang s\\u1EED d\\u1EE5ng\",\n            headStyle: headStyle,\n            children: /*#__PURE__*/_jsxDEV(Space, {\n              size: 30,\n              direction: \"vertical\",\n              children: listActives\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 29\n          }, this), packagesInactive.length > 0 && /*#__PURE__*/_jsxDEV(Card, {\n            title: \"G\\xF3i \\u0111ang ch\\u1EDD duy\\u1EC7t\",\n            headStyle: headStyle,\n            children: /*#__PURE__*/_jsxDEV(Space, {\n              size: 30,\n              direction: \"vertical\",\n              children: listInactive\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            title: \"L\\u1ECBch s\\u1EED thanh to\\xE1n\",\n            headStyle: headStyle,\n            bodyStyle: {\n              padding: 0\n            },\n            children: /*#__PURE__*/_jsxDEV(Table, {\n              dataSource: dataSourceShow,\n              columns: columns,\n              pagination: false,\n              bordered: true,\n              rowClassName: (record, index) => {\n                return (record.total.order > 0 && record.total.order % 2 === 0 ? 'grey' : '') + ' ' + (!record.total.rowSpan0 && !record.total.rowSpan2 && !record.total.rowSpan3 || record.total.rowSpan2 || record.total.rowSpan2 ? 'border-top' : '');\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PackagesActive, \"SdsYHwagqKpusENPRBl9y8w3ugo=\", false, function () {\n  return [useBilling];\n});\n\n_c = PackagesActive;\nexport default PackagesActive;\n\nvar _c;\n\n$RefreshReg$(_c, \"PackagesActive\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/StoreClient/src/pages/setting/list-billings/packages-active.tsx"],"names":["Typography","Space","Row","Col","Card","Table","React","useBilling","PackageActiveItem","PackageName","EBillingPaymentTypeName","formatMoney","formatDate","convertPackages","Text","columns","title","dataIndex","key","render","names","map","item","index","alias","color","name","period","align","value","row","obj","children","price","props","rowSpan3","rowSpan","rowSpan2","rowSpan0","convertPackagesByTransactioncode","pkgs","list","forEach","transactionCode","push","Object","values","PackagesActive","packagesActive","packagesInactive","packages","listHistoryPayment","packagesActiveToShow","listHistoryPaymentShow","packagesInactiveToShow","listActivePackage","listInactivePackage","listActives","listInactive","dataSourceShow","pkg","find","code","packageType","cycleObj","cycles","cycle","id","preItem","nextItem","thenItem","listTransCode","order","includes","package","icon","expiredAt","registeredAt","createdAt","paymentType","total","headStyle","backgroundColor","width","length","padding","record"],"mappings":"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","sourcesContent":["import { Typography, Space, Row, Col, Card, Table } from 'antd';\nimport React from 'react';\nimport { useBilling } from '../create-billing/state/context';\nimport PackageActiveItem from './components/package-active-item';\nimport PackageName from './components/package-name';\nimport { EBillingPaymentTypeName } from '../../../api/billing-api';\nimport { ColumnsType } from 'antd/es/table';\nimport { IPackage } from '../create-billing/state/interface';\nimport { IPackageBiling } from './package-biling';\nimport formatMoney from '../../../helper/format-money';\nimport { formatDate } from '../../../helper/format';\nimport { convertPackages } from '../../../helper/convert';\n\nconst { Text } = Typography;\n\nconst columns: ColumnsType<any> = [\n    {\n        title: 'Tên gói dịch vụ',\n        dataIndex: 'names',\n        key: 'names',\n        render: (names: any) => {\n            return names.map((item: any, index: number) => (\n                <Row align=\"middle\" key={index}>\n                    <Col span={11}>\n                        <PackageName small title={item.alias} bgColor={item.color} />\n                    </Col>\n                    <Col span={11} offset={1} className=\"col-name\">\n                        <Text className=\"text-info\">{item.name}</Text>\n                        <br />\n                        <Text className=\"text-info\">{item.period}</Text>\n                    </Col>\n                </Row>\n            ));\n        },\n        align: 'center',\n    },\n    {\n        title: 'Ngày đăng ký',\n        dataIndex: 'registeredAt',\n        key: 'registeredAt',\n        align: 'center',\n    },\n    {\n        title: 'Ngày kết thúc',\n        dataIndex: 'expiredAt',\n        key: 'expiredAt',\n        align: 'center',\n    },\n    {\n        title: 'Hình thức thanh toán',\n        dataIndex: 'paymentType',\n        key: 'paymentType',\n        align: 'center',\n    },\n    {\n        title: 'Đơn giá',\n        dataIndex: 'price',\n        key: 'price',\n        align: 'center',\n    },\n    {\n        title: 'Tổng thanh toán',\n        dataIndex: 'total',\n        key: 'total',\n        align: 'center',\n        render: (value, row, index) => {\n            const obj: { children: any; props: any } = {\n                children: value.price,\n                props: {},\n            };\n            if (value.rowSpan3) {\n                obj.props.rowSpan = 3;\n            }\n            if (value.rowSpan2) {\n                obj.props.rowSpan = 2;\n            }\n            if (value.rowSpan0) {\n                obj.props.rowSpan = 0;\n            }\n            return obj;\n        },\n    },\n];\n\nfunction convertPackagesByTransactioncode(pkgs: IPackage[]) {\n    const list: any = {};\n    pkgs.forEach((item: IPackage) => {\n        list[item?.transactionCode] = [];\n    });\n    pkgs.forEach((item: IPackage) => {\n        list[item.transactionCode].push(item);\n    });\n    return Object.values(list);\n}\n\nfunction PackagesActive() {\n    const { packagesActive, packagesInactive, packages, listHistoryPayment } = useBilling();\n    const packagesActiveToShow = convertPackages(packagesActive);\n    const listHistoryPaymentShow = convertPackages(listHistoryPayment);\n    const packagesInactiveToShow = convertPackages(packagesInactive);\n    const listActivePackage = convertPackagesByTransactioncode(packagesActiveToShow);\n    const listInactivePackage = convertPackagesByTransactioncode(packagesInactiveToShow);\n    const listActives = listActivePackage.map((item: any, index: number) => (\n        <PackageActiveItem key={index} data={item} />\n    ));\n    const listInactive = listInactivePackage.map((item: any, index: number) => (\n        <PackageActiveItem key={index} data={item} />\n    ));\n\n    const dataSourceShow = listHistoryPaymentShow?.map((item: IPackage, index: number) => {\n        const pkg: IPackageBiling = packages.find(\n            (pkg: IPackageBiling) => pkg.code === item.packageType\n        );\n        const cycleObj = pkg?.cycles.find((cycle: any) => cycle.id === item.period);\n        let rowSpan3 = false;\n        let rowSpan2 = false;\n        let rowSpan0 = false;\n        let preItem: IPackage = packagesActiveToShow[index - 1];\n        let nextItem: IPackage = packagesActiveToShow[index + 1];\n        let thenItem: IPackage = packagesActiveToShow[index + 2];\n        let listTransCode = [item?.transactionCode];\n        let order = 1;\n        if (\n            listTransCode.includes(thenItem?.transactionCode) &&\n            listTransCode.includes(nextItem?.transactionCode)\n        ) {\n            rowSpan3 = true;\n            order = index;\n        }\n        if (listTransCode.includes(preItem?.transactionCode)) {\n            rowSpan0 = true;\n            order = index - 1;\n        }\n        if (\n            !listTransCode.includes(preItem?.transactionCode) &&\n            listTransCode.includes(nextItem?.transactionCode)\n        ) {\n            rowSpan2 = true;\n            order = index;\n        }\n        return {\n            key: index,\n            names: [\n                {\n                    alias: pkg?.alias,\n                    name: pkg?.package,\n                    period: cycleObj?.name,\n                    color: pkg?.color,\n                    icon: pkg?.icon,\n                },\n            ],\n            expiredAt: formatDate(item?.expiredAt),\n            registeredAt: formatDate(item?.createdAt),\n            paymentType: EBillingPaymentTypeName[item?.paymentType],\n            price: formatMoney(cycleObj?.price || 0),\n            total: {\n                price: formatMoney(item?.total || 0),\n                rowSpan2,\n                rowSpan0,\n                rowSpan3,\n                order,\n            },\n        };\n    });\n\n    const headStyle = { backgroundColor: '#f6f8f8' };\n    return (\n        <div className=\"packages-content\">\n            <Row>\n                <Col span={18} offset={3}>\n                    <Space direction=\"vertical\" size={16} style={{ width: '100%' }}>\n                        {packagesActive.length > 0 && (\n                            <Card title=\"Gói đang sử dụng\" headStyle={headStyle}>\n                                <Space size={30} direction=\"vertical\">\n                                    {listActives}\n                                </Space>\n                            </Card>\n                        )}\n                        {packagesInactive.length > 0 && (\n                            <Card title=\"Gói đang chờ duyệt\" headStyle={headStyle}>\n                                <Space size={30} direction=\"vertical\">\n                                    {listInactive}\n                                </Space>\n                            </Card>\n                        )}\n                        <Card\n                            title=\"Lịch sử thanh toán\"\n                            headStyle={headStyle}\n                            bodyStyle={{\n                                padding: 0,\n                            }}\n                        >\n                            <Table\n                                dataSource={dataSourceShow}\n                                columns={columns}\n                                pagination={false}\n                                bordered\n                                rowClassName={(record: any, index: number) => {\n                                    return (\n                                        (record.total.order > 0 && record.total.order % 2 === 0\n                                            ? 'grey'\n                                            : '') +\n                                        ' ' +\n                                        ((!record.total.rowSpan0 &&\n                                            !record.total.rowSpan2 &&\n                                            !record.total.rowSpan3) ||\n                                        record.total.rowSpan2 ||\n                                        record.total.rowSpan2\n                                            ? 'border-top'\n                                            : '')\n                                    );\n                                }}\n                            />\n                        </Card>\n                    </Space>\n                </Col>\n            </Row>\n        </div>\n    );\n}\n\nexport default PackagesActive;\n"]},"metadata":{},"sourceType":"module"}